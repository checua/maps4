@page "{idInmueble:int}"
@model maps4.Pages.Share.IndexModel

@{
    // Busca el nombre del tipo de propiedad que coincida con el idTipo del inmueble
    var tipoPropiedad = Model.TiposPropiedades.FirstOrDefault(t => t.idTipoPropiedad == Model.Inmueble.IdTipo)?.nombre ?? "Propiedad";
    var observaciones = !string.IsNullOrEmpty(Model.Inmueble.Observaciones) ? Model.Inmueble.Observaciones : "Descripción no disponible";
    var idInmueble = Model.Inmueble.IdInmueble;
    var imageUrl = $"https://rsmap.azurewebsites.net/cargas/{idInmueble}_1.jpg";
    var pageUrl = $"https://rsmap.azurewebsites.net/?inmuebleId={idInmueble}";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@($"{tipoPropiedad}")</title>

    <!-- Metadatos Open Graph -->
    <meta property="og:image" content="@imageUrl" />
    <meta property="og:image:alt" content="Vista previa del inmueble" />
    <meta property="og:title" content="@($"{tipoPropiedad}")" />
    @* <meta property="og:description" content="@observaciones" /> *@
    <meta property="og:url" content="@pageUrl" />
    <meta property="og:type" content="website" />

    <!-- Etiqueta canónica para la redirección -->
    <link rel="canonical" href="@pageUrl" />

    <!-- Metadatos adicionales para Twitter (opcional) -->
    <meta name="twitter:image" content="@imageUrl" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="@($"{tipoPropiedad}")" />
    @* <meta name="twitter:description" content="@observaciones" /> *@

    <!-- Redirección automática con JavaScript -->
    <script type="text/javascript">
        window.location.href = "@pageUrl";
    </script>
</head>
<body>
    <h1>@($"{tipoPropiedad}")</h1>
    <p>@observaciones</p>
    <img src="@imageUrl" alt="Vista previa del inmueble" style="max-width: 100%; height: auto;" />
</body>
</html>
